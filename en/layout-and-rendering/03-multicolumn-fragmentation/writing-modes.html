
<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Writing direction and column order test</title>
<link rel="stylesheet" href="style.css" />
<script defer src="utils.js"></script>
</head>
<body>
  <header id="topbar">
    <h1>Writing direction and column order test</h1>
    <p>focus on:<code>writing-mode</code> and <code>direction</code> under changeListdirection of progressandContent order.</p>
  </header>

  <section id="toolbar" class="container">
    <div class="toolbar">
      <div class="control" style="grid-column: span 3;">
        <label>Number of columns (column-count):<output id="countOut"></output></label>
        <input id="count" type="range" min="2" max="8" value="3" />
      </div>
      <div class="control" style="grid-column: span 3;">
        <label>column spacing (column-gap):<output id="gapOut"></output></label>
        <input id="gap" type="range" min="0" max="48" value="24" />
      </div>
      <div class="control" style="grid-column: span 3;">
        <label>writing-mode</label>
        <select id="wm">
          <option value="horizontal-tb" selected>horizontal-tb(default)</option>
          <option value="vertical-rl">vertical-rl(Top to bottom, columns right to left)</option>
          <option value="vertical-lr">vertical-lr(Top to bottom, columns left to right)</option>
        </select>
      </div>
      <div class="control" style="grid-column: span 3;">
        <label>direction</label>
        <select id="dir">
          <option value="ltr" selected>ltr</option>
          <option value="rtl">rtl</option>
        </select>
      </div>
      <div class="control" style="grid-column: span 3;">
        <label>Column separator width:<output id="ruleWOut"></output></label>
        <input id="ruleW" type="range" min="0" max="6" value="1" />
      </div>
      <div class="control" style="grid-column: span 3;">
        <label>column separator style</label>
        <select id="ruleStyle">
          <option value="none">none</option>
          <option value="solid" selected>solid</option>
          <option value="dashed">dashed</option>
          <option value="dotted">dotted</option>
        </select>
      </div>
      <div class="control" style="grid-column: span 3;">
        <label>Column separator color</label>
        <input id="ruleColor" type="color" value="#dddddd" />
      </div>
      <div class="control" style="grid-column: span 12;">
        <div id="metrics" class="meta"></div>
      </div>
    </div>
  </section>

  <main id="test-area" class="container">
    <div id="mcWrap" class="test-card" style="height: 560px; overflow: auto;">
      <div id="mc" class="columns" style="column-count:3; column-gap:24px;">
        <!-- Blocks injected -->
      </div>
    </div>
  </main>

  <section id="explain" class="container">
    <h2>Test instructions</h2>
    <ul>
      <li>Content is organized into numbered, color-coded areaspiececomposition(each districtpieceavoid crossingListSplit),Easy to observeListandcontentdirection of progress.</li>
      <li>Switch between different writing modesanddirection,confirmListIs the order ofandConsistent specifications(For example vertical-rl Columns should be from right to left).</li>
    </ul>
  </section>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const mc = $("#mc");
      const wrap = $("#mcWrap");
      const count = $("#count"); const countOut = $("#countOut");
      const gap = $("#gap"); const gapOut = $("#gapOut");
      const wm = $("#wm");
      const dir = $("#dir");
      const ruleW = $("#ruleW"); const ruleWOut = $("#ruleWOut");
      const ruleStyle = $("#ruleStyle");
      const ruleColor = $("#ruleColor");
      const metrics = $("#metrics");

      bindRangeOutput(count, countOut, v => v + " List");
      bindRangeOutput(gap, gapOut);
      bindRangeOutput(ruleW, ruleWOut);

      function buildBlocks() {
        mc.innerHTML = "";
        for (let i = 1; i <= 48; i++) {
          const b = document.createElement("div");
          b.className = "grid-block";
          b.style.minHeight = (60 + Math.floor(Math.random() * 80)) + "px";
          b.innerHTML = `<strong>piece ${String(i).padStart(2,"0")}</strong>:Used to observe which content is inList,as well asListofdirection of progress.`;
          mc.appendChild(b);
        }
      }

      function apply() {
        mc.style.columnCount = count.value;
        mc.style.columnGap = gap.value + "px";
        mc.style.writingMode = wm.value;
        mc.style.direction = dir.value;
        mc.style.columnRule = `${ruleW.value}px ${ruleStyle.value} ${ruleColor.value}`;
        renderMetrics(mc, metrics);
        // Add explicit badges for current writing-mode & direction
        const extra = document.createElement("span");
        extra.className = "badge";
        extra.textContent = `writing-mode:${wm.value} / direction:${dir.value}`;
        metrics.appendChild(extra);
      }

      buildBlocks();
      apply();
      [count, gap, wm, dir, ruleW, ruleStyle, ruleColor].forEach(i => i.addEventListener("input", apply));
      window.addEventListener("resize", apply);
    });
  </script>
</body>
</html>
