<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>研发侧用例 01｜Renderer Pass 嵌套与离屏缓冲链路（SVG Filter｜居中覆盖层）</title>
  <style>
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Noto Sans CJK SC","Microsoft YaHei",sans-serif;line-height:1.5;color:#111;background:#fff}
    :root{--page-width:1120px;--radius:12px;--border:1px solid rgba(0,0,0,.08);--badge:#111;--accent:#0ea5e9;--o-height:160px;--o-width:min(960px,72vw);--blur-o:8px}
    .page{position:relative}
    .header{position:sticky;top:0;z-index:1000;background:#fff;border-bottom:var(--border)}
    .topbar .inner{max-width:var(--page-width);margin:0 auto;padding:16px 24px}
    .title{font-weight:600;font-size:20px;margin:0 0 6px 0}.subtitle{margin:0;color:#444}
    .toolbar{background:#fff;border-top:var(--border)}
    .toolbar .inner{max-width:var(--page-width);margin:0 auto;padding:12px 24px;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px 16px}
    .group{display:grid;gap:8px}.controls{display:flex;flex-wrap:wrap;gap:8px 14px}.controls input{accent-color:var(--accent)}.pill{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;border:var(--border);background:#fafafa;font-size:13px}
    .chip-row{display:flex;flex-wrap:wrap;gap:10px;padding:12px 24px}
    .chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:var(--border);background:#f8fafc;font-size:13px}

    .stage{max-width:var(--page-width);margin:0 auto;padding:24px}
    .backdrop{position:relative;min-height:clamp(820px,120vh,1600px);border-radius:12px;overflow:clip;border:var(--border);background:conic-gradient(from 45deg,#e5e7eb 0 25%,#fff 0 50%,#e5e7eb 0 75%,#fff 0) 0 0/24px 24px,repeating-linear-gradient(135deg,rgba(0,0,0,.06) 0 2px,transparent 2px 8px),radial-gradient(1200px 600px at 80% 20%,rgba(2,132,199,.18),transparent 60%),radial-gradient(800px 500px at 10% 70%,rgba(236,72,153,.16),transparent 70%),#fff;padding:24px;margin-top:12px}

    .overlay-o{position:sticky;top:clamp(160px,calc(50vh - var(--o-height)/2),65vh);z-index:5;width:var(--o-width);height:var(--o-height);margin:0 auto;border-radius:16px;border:1px solid rgba(0,0,0,.06);background:rgba(255,255,255,.35);-webkit-backdrop-filter:blur(var(--blur-o)) saturate(120%);backdrop-filter:blur(var(--blur-o)) saturate(120%);box-shadow:0 8px 24px rgba(0,0,0,.08);pointer-events:none}
    .overlay-o::after{content:"覆盖层 O（居中，backdrop-filter）";position:absolute;left:12px;top:10px;font-size:12px;padding:4px 8px;border-radius:999px;color:#fff;background:#111}

    .layer-a{position:absolute;left:4%;top:10%;width:72%;height:60%;border-radius:28px;border:1px solid rgba(0,0,0,.08);background:linear-gradient(135deg,rgba(16,185,129,.08),rgba(99,102,241,.08));filter:url(#blur6)}
    .layer-a::before{content:"A（SVG filter: feGaussianBlur）";position:absolute;left:12px;top:10px;font-size:12px;padding:4px 8px;border-radius:999px;color:#fff;background:var(--badge)}
    .layer-b{position:absolute;left:12%;top:16%;width:56%;height:56%;border-radius:24px;border:1px solid rgba(0,0,0,.1);background:rgba(251,191,36,.42);mix-blend-mode:multiply;isolation:isolate;box-shadow:0 10px 26px rgba(0,0,0,.1);overflow:hidden}
    .layer-b::before{content:"B（mix-blend-mode: multiply）";position:absolute;left:12px;top:10px;font-size:12px;padding:4px 8px;border-radius:999px;color:#fff;background:var(--badge)}
    .layer-c{position:absolute;left:22%;top:24%;width:260px;height:260px;border-radius:18px;border:1px solid rgba(0,0,0,.12);background:repeating-conic-gradient(from 0deg,#0f172a 0 10deg,#94a3b8 10deg 20deg);-webkit-mask-image:radial-gradient(circle at 50% 50%,rgba(0,0,0,1) 60%,rgba(0,0,0,0) 62%);mask-image:radial-gradient(circle at 50% 50%,rgba(0,0,0,1) 60%,rgba(0,0,0,0) 62%);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain}
    .layer-c::before{content:"C（mask-image: radial-gradient）";position:absolute;left:12px;top:10px;font-size:12px;padding:4px 8px;border-radius:999px;color:#fff;background:#111}

    .page:has(#radius-06:checked){--blur-o:8px}.page:has(#radius-12:checked){--blur-o:16px}.page:has(#radius-24:checked){--blur-o:32px}
    .page:has(#radius-06:checked) .layer-a{filter:url(#blur6)}
    .page:has(#radius-12:checked) .layer-a{filter:url(#blur12)}
    .page:has(#radius-24:checked) .layer-a{filter:url(#blur24)}
    .overlay-o{display:none}.page:has(#toggle-o:checked) .overlay-o{display:block}

    .explain{max-width:var(--page-width);margin:0 auto;padding:24px;border-top:var(--border)}
    .explain h3{margin:0 0 10px 0;font-size:16px}.explain .note{font-size:12px;color:#666}
  </style>
</head>
<body>
  <!-- SVG filter defs; expand filter region to avoid edge clipping -->
  <svg width="0" height="0" style="position:absolute">
    <defs>
      <filter id="blur6" x="-20%" y="-20%" width="140%" height="140%">
        <feGaussianBlur stdDeviation="6" edgeMode="duplicate"/>
      </filter>
      <filter id="blur12" x="-30%" y="-30%" width="160%" height="160%">
        <feGaussianBlur stdDeviation="12" edgeMode="duplicate"/>
      </filter>
      <filter id="blur24" x="-60%" y="-60%" width="220%" height="220%">
        <feGaussianBlur stdDeviation="24" edgeMode="duplicate"/>
      </filter>
    </defs>
  </svg>

  <div class="page">
    <div class="header">
      <header class="topbar">
        <div class="inner">
          <h1 class="title">研发侧用例 01｜Renderer Pass 嵌套与离屏缓冲链路（SVG Filter｜居中覆盖层）</h1>
          <p class="subtitle">将外层 A 的 CSS <code>blur()</code> 替换为 SVG <code>feGaussianBlur</code>，居中覆盖层 O，便于操作与观察。</p>
        </div>
      </header>

      <section class="toolbar">
        <div class="inner">
          <div class="group">
            <label>模糊半径（A：SVG filter）</label>
            <div class="controls">
              <label class="pill"><input id="radius-06" name="radius" type="radio" checked> 6px</label>
              <label class="pill"><input id="radius-12" name="radius" type="radio"> 12px</label>
              <label class="pill"><input id="radius-24" name="radius" type="radio"> 24px</label>
            </div>
          </div>
          <div class="group">
            <label>覆盖层 O（backdrop-filter）</label>
            <div class="controls">
              <label class="pill"><input id="toggle-o" type="checkbox" checked> 显示</label>
            </div>
          </div>
        </div>
        <div class="chip-row">
          <span class="chip">A: feGaussianBlur (SVG)</span>
          <span class="chip">B: mix-blend multiply, isolation</span>
          <span class="chip">C: mask-image radial</span>
          <span class="chip">O: backdrop-filter blur</span>
        </div>
      </section>
    </div>

    <main class="stage">
      <div class="backdrop">
        <div class="layer-a">
          <div class="layer-b">
            <div class="layer-c"></div>
          </div>
        </div>

        <div class="overlay-o" aria-hidden="true"></div>
      </div>
    </main>

    <section class="explain">
      <h3>解释说明</h3>
      <ul>
        <li>覆盖层 O 在测试区域内部并居中；采用 <code>position: sticky</code>，不与顶栏/工具栏/底部说明重叠。</li>
        <li>对比 <em>Layers</em> 面板中 A 图层在 SVG/CSS 滤镜下的离屏纹理尺寸与合成顺序。</li>
      </ul>
      <p class="note">仍为纯静态实现，无 JS。</p>
    </section>
  </div>
</body>
</html>
